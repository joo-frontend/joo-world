<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <title>Title</title>
    <link rel="stylesheet" href="../../css/ui/ui.style.css">
</head>
<body>
<div class="wrap_header">
    <ul class="clearfix header_menu">
        <li><a href="#" class="sprite sprite_common sprite_header_menu_pick">픽.</a></li>
        <li><a href="#" class="sprite sprite_common sprite_header_menu_tip">팁.</a></li>
        <li class="active"><a href="#" class="sprite sprite_common sprite_header_menu_talk">톡.</a></li>
    </ul>
    <a href="#" class="header_btn_right"><i class="sprite sprite_common sprite_icon_my "></i></a>
</div>
<div class="wrapper_talk">
    <div class="wrap_contents">
        <p class="desc_history">대화 이력은 최근 2주 동안만 제공됩니다.</p>
        <p class="desc_date">2017년 09월 03일 일요일</p>
        <ul class="area_bot_chat">
            <p class="bot_img">이미지</p>
            <li>

            </li>
        </ul>



    </div>

    <div class="wrap_chat_window">
        <div class="box_chat_window">
            <p class="link_more"><a href="#">more</a></p>
            <textarea class="chat_window" rows="1"></textarea>
        </div>
    </div>
</div>
<script type="text/javascript" src="../../js/lib/jquery-3.2.1.min.js"></script>
<script>

    var box = document.querySelector('.box_chat_window');
    var ta = document.querySelector('.chat_window');

        /*ta.addEventListener('keydown', autosize);*/

        $('.chat_window').on('keydown', function(){
            if($('.chat_window').height() < 90){
                autosize();
            }
        })


    function autosize() {
        var box = document.querySelector('.box_chat_window');
        var ta = document.querySelector('.chat_window');
        setTimeout(function() {
            ta.style.cssText = 'height:0px';
            console.log( ta.scrollHeight)
            var height = Math.min(20*3, ta.scrollHeight - 1);

            box.style.cssText = 'height:' + (height + 18) +'px';
            ta.style.cssText = 'height:' + height +'px';
        },0);
    }
</script>
</body>
</html>