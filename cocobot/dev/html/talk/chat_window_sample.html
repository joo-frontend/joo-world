<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <title>Title</title>

    <style>
        body {
            background: lightgray;
        }

        #contents {
            position: absolute;
            left:   0;
            top:    0;
            right:  0;
            bottom: 0;
            margin: auto;
            width:  250px;
            height: 350px;
            border: 1px solid gray;
        }

        #chat {
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        #message {
            flex: 1;
            background-color: #cce;
        }

        #ta-frame {
            margin: 0;
            padding: 10px 10px;
            width: 230px;
            height: 20px;
            border-top: 1px solid gray;
            background-color: #eee;
        }

        textarea {
            overflow: hidden;
            margin:  0;
            padding: 0;
            border:  0;
            outline: 0;
            width: 100%;
            font-size: 20px;
            resize: none;
        }
    </style>
</head>
<body>
<div id="contents">
    <div id="chat">
        <div id="message"></div>
        <div id="ta-frame">
            <textarea rows='1'></textarea>
        </div>
    </div>
</div>
<script type="text/javascript" src="../../js/lib/jquery-3.2.1.min.js"></script>
<script>

    var div = document.querySelector('#ta-frame');
    var ta =  document.querySelector('textarea');

    ta.addEventListener('keydown', autosize);

    function autosize() {
        setTimeout(function() {
            ta. style.cssText = 'height:0px'; // 文字を削除した場合にscrollHeightを縮めるためにこれが必要
            var height = Math.min(20 * 5, ta.scrollHeight);
            div.style.cssText = 'height:' + height + 'px';
            ta. style.cssText = 'height:' + height + 'px';
        },0);
    }
</script>
</body>
</html>